karl package Changelog
======================

Unreleased
----------

- Add a ``karl_project`` paster template (unfinished) in order to
  bootstrap a KARL customization.  The code used is an amalgam of
  Tres' ``non_osi_template`` package updated with recent changes to
  the OSI package.

- Forward compat: use the "repoze.bfg.view.static" helper rather than
  rolling our own view to serve static files in karl.views.site.

- LP #392561:  get 'content_modified' set correctly on communities when
  adding content.

- LP #391234:  Use a non-forked version of the repoze.who auth_tkt plugin
  (repoze.who 1.0.15, now in the "lemonade" index has the "max age" feature
  which made this fork necessary).

- LP #391246:  Removed concept of "vocabularies" as a persistently stored
  thing with indirection.  Placed countries data in core karl package as
  const data.

- LP #390868:  Updated OSI logo.

- LP #384841:  Add 'use_cache' kw argument to CachingCatalog to disable
  cache for particular searches.

- LP #391377: Moved settings such as 'system_email_domain' to karl.ini.

- Stop using a custom KarlSecurityPolicy; this policy was identical to
  the WhoInheritingACLSecurityPolicy in repoze.bfg 0.8+.  Use that one
  instead.

- LP #388096: Made a link to the community delete operation.

- LP #391247: Refactored console scripts to make them easier to test
  and maintain.  Renamed osi.ini to karl.ini.

- LP #391251: Moved osi/utilities to the karl package.

- Graceful handling if invalid 'To:' address in mailin.

- Mailin can now signal that it is wedged by writing a file, '.error', to
  its Maildir when it encounters an error.  This is easier to set up monitoring
  for than scraping the logs.  Humans will still need to read the logs when
  an error is found.

3.2 (2009-06-24)
----------------

- LP #387974:  Made 'edit_acl.html' view reindex context in the 'allowed'
  index, as well as invalidating any cached catalog queries.

- Added a simpler people directory implementation to the KARL core.

- For text index converters that use external programs, added a timeout thread
  to kill hanging processes.  Process is considered hanging after 5 seconds.
  This is to work around an error in wvConvert such that it will hang
  indefinitely for certain inputs.


3.1 (2009-06-16)
----------------

- LP #387390:  Add / enable delete profile view, deleting the corresponding
  user as well.

- LP #336714:  Added optional 'reason' argument to 'logout_view', to enable
  overriding the header value passed explaining why the user landed on the
  login form.  Use this argument when returning the logout response from
  another view.

- LP #385580:  Have the "Back to Parent" link not be full width on the <a>.

- LP #385268:  Email index is converted to lower case to facilitate case
  insensitive search.

- LP #385636: Better handling of existing users in invite new users form.


3.0 (2009-06-15)
----------------

- LP #384096: Intersect text index search results last for advanced search,
  improving relevance ranking.

- Micro-speedups for "communities" page.

- LP 386110:

  o Filter items in showtag view according to view permission of
    authenticated user.

  o Consolidated three showtag views to use same code.

  o Fix double slashes in profile view.

  o Make sure new user profiles get initialized with __acl__.


osi-production-20090611 (2009-06-11)
------------------------------------

- Temporarily revert commit to use "natural" order of text index
  committed in osi-production-20090610 because caused search queries
  to ignore catalog security info.


osi-production-20090610 (2009-06-10)
------------------------------------

- LP #384096: Updated code for generic search to use "natural" order of
  text index, where possible.

- Fixed 'karl.views.people.show_profile_view' not to blow up when
  userid != login.

- Add member_name index for text searching of just member names.
  NOTE: This requires running reindex_catalog -p /profiles

- Improved performance of member search widget in add_member_view


osi-production-20090608 (2009-06-08)
------------------------------------

- Switched to using a multi-adapter for footer (replaces hard-wired OSI
  branding).


osi-production-20090603 (2009-06-03)
------------------------------------

- Made the lastfirst index case-insensitive

- LP #382857: Sort community members by last name / first name.

- Use get_setting instead of looking ISettings.

- LP #382576: Use 'method="get"' in the advanced search form.  Also, gather
  vars for batching from either POST or GET submissions.

- grid: Fix initial sorting direction, and direction on the first click.

- grid: Make header borders collapse, and adjust column width calculations

- Added OfflineContextURL for enabling use of model_url outside of HTTP
  context, and registered OfflineContextURL as an adapter for OfflineRequest.

- LP #382572:

  o Ensure that community / profile tag listings are slpha-sorted.

- LP #381671:

  o Allow narrowing tagging APIs by user.

  o Pass user to profile-specific invocations of getFrequency.

  o Show better breadcrumbs in tag views.

  o Pass user to 'getRelatedTags' in 'profile_showtag_view'.

  o Show related tag links relative to profile / community / root.

- login: Disable all validation against spaces in the username.

- tagsearch: Fix tagsearch result list to never wrap, and extend its length
  for longer search results.


osi-production-20090531 (2009-05-31)
------------------------------------

- No changes to this package.


osi-production-20090528 (2009-05-28)
------------------------------------

- Initial version rolled out to replace KARL2.
