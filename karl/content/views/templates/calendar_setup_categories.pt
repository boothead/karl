<?xml version="1.0" encoding="utf-8"?>
<html xmlns="http://www.w3.org/1999/xhtml"
     xmlns:tal="http://xml.zope.org/namespaces/tal"
     xmlns:metal="http://xml.zope.org/namespaces/metal"
     metal:use-macro="api.community_layout.macros['master']">

  <div metal:fill-slot="content">
    <div metal:use-macro="api.snippets.macros['status_message']"/>

    <div class="chparent_wrapper">
      <a id="backto" class="chparent" href="${back_to_setup_url}">
        <img width="15" height="15" alt="Up to" src="${api.static_url}/images/arrow_up.jpg"/>
        Back to Setup
      </a>
    </div>

  <h1 class="kscreentitle" tal:condition="categories">${api.page_title}</h1>

  <div metal:use-macro="formfields.macros['formerror']"/>

  <table id="calendars" class="cal_all" cellspacing="0" tal:condition="categories">
    <tr>
      <th>Name</th>
      <th>&nbsp;</th>
    </tr>
    <tr tal:repeat="category categories">
      <td class="name">${category.title}</td>
      <td class="actions">
        <a class="delete_action" id="delete_${category.__name__}" href="#">delete</a>
      </td>
    </tr>
  </table>

  <div id="setup_add_cal">
    <a href="#">Add Category</a>
  </div>

  <form id="setup_add_cal_form" style="display: none" method="post" 
        action="${post_url}" class="cal_add k3_genericForm"
        xml:id="contentform" enctype="multipart/form-data" name="save" >

    <h1>Add Category</h1>
      
    <fieldset tal:define="error fielderrors['category_name']|None"
              class="calendar-categories-field ${error and 'fieldError' or ''}">
      <label for="category_name" class="required">Name the category</label><br />
      <div tal:condition="error" class="errorMessage">${error}</div> 
      <input name="category_name" id="calendar_name" type="text"/>
    </fieldset>

    <fieldset tal:define="error fielderrors['layer_color']|None"
              class="calendar-categories-field ${error and 'fieldError' or ''}">
      <label for="layer_color" class="required">Choose color</label><br />
      <div tal:condition="error" class="errorMessage">${error}</div> 

      <ul class="cal_choose_color">
        <li tal:repeat="color colors">
            <input name="layer_color"
                   type="radio" value="${color}" alt="${color}"/>
            <br/>
            <div class="cal_${color}_all">&nbsp;</div>
        </li>
      </ul>

    </fieldset>

    <fieldset metal:use-macro="formfields.macros['form-submit']"/>
  </form>

  <form method="post" action="${post_url}" id="cal_delete_form">
    <input type="hidden" name="form.delete" value="#" />
  </form>

  </div>
</html>
